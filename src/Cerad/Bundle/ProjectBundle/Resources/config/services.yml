parameters:

    cerad_project__project_event_listener__class:
        Cerad\Bundle\ProjectBundle\EventListener\ProjectEventListener

services:

    cerad_project.repository.in_memory:
        class:  Cerad\Bundle\ProjectBundle\InMemory\ProjectRepository
        arguments:  
            - '%cerad_project_project_files%'

    cerad_project.find_default.in_memory:
        class:  Cerad\Bundle\ProjectBundle\InMemory\ProjectFind
        arguments:  
            - '@cerad_project.repository.in_memory'
            - '%cerad_project_project_default%'
            
    cerad_project.project_repository:
        alias: cerad_project.repository.in_memory
        
    cerad_project.project_current:
        class:  Cerad\Bundle\ProjectBundle\Model\Project
        factory_class: Cerad\Bundle\ProjectBundle\InMemory\ProjectCurrent
        factory_method: get
        arguments:  
            - '@cerad_project.repository.in_memory'
            - '%cerad_project_project_default%'
            
    cerad_project__project_event_listener:
        class: '%cerad_project__project_event_listener__class%'
        calls:
             - [setContainer, ['@service_container']]
        tags:
            - { name: kernel.event_subscriber }
        arguments:
            - 'cerad_project.project_repository'
 